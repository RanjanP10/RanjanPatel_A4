<html>
<head>
    <title>Ranjan_A4_P2</title>
</head>
 <body>
 <div id="display">
 </div>
 <p><input id="message" type="text" name="message" placeholder="Add Your message"></p>
 <p><input id="username" type="text" name="username" placeholder="enter username"></p>
 <p>
 <button type="button" onclick="postdata()">Submit Message</button>
 </p>
 </body>
<script>  
function getmessage() {
   
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
            // retrieve data from server
                document.getElementById("display").innerHTML = this.responseText;
            }
        };
        // send data to server
        xhttp.open("GET", "messages.php?", true);
        xhttp.send();
}

function postdata() {
    var http = new XMLHttpRequest();
var url = 'input.php';
var user = document.getElementById('username').value;
var message = document.getElementById('message').value;
http.open('POST', url, true);

//Send the proper header information along with the request
http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

http.onreadystatechange = function() {//Call a function when the state changes.
    if(http.readyState == 4 && http.status == 200) {
       // alert(http.responseText);
    }
}
http.send("username="+user+"&message="+message);
document.getElementById('username').value = " ";
document.getElementById('message').value = " ";
 
}
timer = setInterval(getmessage, 1000);

 </script>
 </html>